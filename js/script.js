// menu

let menu = document.getElementById("menu");
let menuButton = document.getElementById("menuButton");
let burgerMenu1 = document.getElementById("burgerMenu1");
let burgerMenu2 = document.getElementById("burgerMenu2");
let burgerMenu3 = document.getElementById("burgerMenu3");
console.log(menu);


function burgerMenu() {
    console.log(menu);
    burgerMenu1.classList.toggle("checked1");
    burgerMenu2.classList.toggle("checked2");
    burgerMenu3.classList.toggle("checked3");
    menu.classList.toggle("opened");
    menuButton.classList.toggle("opened-menu");
}

function closeMenu() {
    burgerMenu1.classList.toggle("checked1");
    burgerMenu2.classList.toggle("checked2");
    burgerMenu3.classList.toggle("checked3");
    menu.classList.toggle("opened");
    menuButton.classList.toggle("opened-menu");
}

//effects

const sections = document.querySelectorAll('section.section'); // —Ç–æ–ª—å–∫–æ <section class="section">

const observer = new IntersectionObserver((entries, observer) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('show');
      observer.unobserve(entry.target); // –æ—Ç–∫–ª—é—á–∏—Ç—å, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ
    }
  });
}, {
  threshold: 0.1, // –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 0.3‚Äì0.5 –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
});

sections.forEach(section => {
  observer.observe(section);
});


// switcher

const catalogContainers = document.querySelectorAll(".catalog-container");
const catalogSwitchers = document.querySelectorAll(".catalog-switcher");
const catalogItems = document.querySelectorAll(".catalog_items");

catalogContainers.forEach((container, i) => {
  container.addEventListener("click", () => {
    catalogSwitchers[i].classList.toggle("switcher-opened");
    catalogItems[i].classList.toggle("catalog-opened");
  });
});


//catalog 1

let items1 = [
    {
id: "catalog__item1",
number: "1",
photo1: "images/item1.png",
photo2: "images/items/item1-1.jpg",
photo3: "images/items/item1-3.jpg",
heading: "–ß–µ—Ö–æ–ª1 –ø–æ–¥ –±—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç 6094 TV-103",
text: "TV-103-ATFGN-B1",
price: "200 BYN / 15 804 RUB",
color: "–û–ª–∏–≤–∞",
description: "–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —á–µ—Ö–æ–ª –ø–æ–¥ –±—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç —Å —Å–∏—Å—Ç–µ–º–æ–π –±—ã—Å—Ç—Ä–æ–≥–æ —Å–±—Ä–æ—Å–∞, —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–æ–π —Ä–∞–∑–º–µ—Ä–∞ –∏ –æ—Ç–¥–µ–ª–µ–Ω–∏—è–º–∏ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –±—Ä–æ–Ω–µ—ç–ª–µ–º–µ–Ω—Ç–æ–≤. –í—ã–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –¥–≤—É—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö –∏ –∏–º–µ–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ä–∞–∑–º–µ—Ä–æ–≤. –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π EDC –ø–æ–¥—Å—É–º–æ–∫ –®–∞–Ω—Å UP-129 —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –¥–ª—è –Ω–æ—à–µ–Ω–∏—è –Ω–∞ –ø–æ—è—Å–Ω–æ–º —Ä–µ–º–Ω–µ, –ª–∏–±–æ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–∞—Ä–º–∞–Ω–Ω–æ–π –∞–ø—Ç–µ—á–∫–∏. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—é –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é, –Ω–µ —É—Ö—É–¥—à–∞—é—â–∏–µ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏–∑–¥–µ–ª–∏–π, –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.",
},
{
  id: "catalog__item2",
  number: "2",
  photo1: "images/items/item1-1.jpg",
  photo2: "images/item1.png",
  photo3: "images/items/item1-3.jpg",
  heading: "–ß–µ—Ö–æ–ª2 –ø–æ–¥ –±—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç 6094 TV-103",
  text: "TV-103-ATFGN-B2",
  price: "200 BYN / 15 804 RUB",
  color: "–û–ª–∏–≤–∞",
},
{
  id: "catalog__item3",
  number: "3",
  photo1: "images/item1.png",
  photo2: "images/items/item1-1.jpg",
  photo3: "images/items/item1-3.jpg",
  heading: "–ß–µ—Ö–æ–ª3 –ø–æ–¥ –±—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç 6094 TV-103",
  text: "TV-103-ATFGN-B3",
  price: "200 BYN / 15 804 RUB",
  color: "–û–ª–∏–≤–∞",
},
{
  id: "catalog__item4",
  number: "4",
  photo1: "images/item1.png",
  photo2: "images/items/item1-1.jpg",
  photo3: "images/items/item1-3.jpg",
  heading: "–ß–µ—Ö–æ–ª4 –ø–æ–¥ –±—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç 6094 TV-103",
  text: "TV-103-ATFGN-B4",
  price: "200 BYN / 15 804 RUB",
  color: "–û–ª–∏–≤–∞",
},
]





// catalog 2

let items2 = [
  {
id: "catalog__item5",
number: "5",
photo1: "images/item1.png",
photo2: "images/items/item1-1.jpg",
photo3: "images/items/item1-3.jpg",
heading: "–ß–µ—Ö–æ–ª5 –ø–æ–¥ –±—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç 6094 TV-103",
text: "TV-103-ATFGN-B1",
price: "200 BYN / 15 804 RUB",
color: "–û–ª–∏–≤–∞",
},
{
id: "catalog__item6",
number: "6",
photo1: "images/items/item1-1.jpg",
photo2: "images/items/item1-3.jpg",
photo3: "images/item1.png",
heading: "–ß–µ—Ö–æ–ª6 –ø–æ–¥ –±—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç 6094 TV-103",
text: "TV-103-ATFGN-B2",
price: "200 BYN / 15 804 RUB",
color: "–û–ª–∏–≤–∞",
},
{
id: "catalog__item7",
number: "7",
photo1: "images/items/item1-3.jpg",
photo2: "images/items/item1-1.jpg",
photo3: "images/item1.png",
heading: "–ß–µ—Ö–æ–ª7 –ø–æ–¥ –±—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç 6094 TV-103",
text: "TV-103-ATFGN-B3",
price: "200 BYN / 15 804 RUB",
color: "–û–ª–∏–≤–∞",
},
]



// function to render items
function renderCatalog(items, containerId) {
  const container = document.getElementById(containerId);
  let cards = "";

  items.forEach((item) => {
    cards += `
    <div id="${item.id}" class="catalog__item">
      <div class="slider" data-slider-id="${item.number}">
        <div class="slider-controls">
          <button class="slider-button prev">
            <img src="images/icons/prev-arrow-active.svg" alt="Previous" class="slider-arrow">
          </button>
          <div class="images">
            <img src="${item.photo1}" class="item-photo">
            <img src="${item.photo2}" class="item-photo">
            <img src="${item.photo3}" class="item-photo">
          </div>
          <button class="slider-button next">
            <img src="images/icons/next-arrow-active.svg" alt="Next" class="slider-arrow">
          </button>
        </div>
        <div class="indicators"></div>
      </div>
      <p class="item-heading">${item.heading}</p>
      <p class="item-text"><span>–ê—Ä—Ç–∏–∫—É–ª</span>: ${item.text}</p>
      <p class="item-color"><span>–¶–≤–µ—Ç</span>: ${item.color}</p>
      <p class="item-price">${item.price}</p>
      <button class="product-button" data-id="${item.id}">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
    </div>
    `;
  });

  container.innerHTML = cards;
}

renderCatalog(items1, "catalogItems1");
renderCatalog(items2, "catalogItems2");



// slider

document.addEventListener("DOMContentLoaded", function () {
  const sliders = document.querySelectorAll('.slider');

  sliders.forEach(slider => {
      const imagesContainer = slider.querySelector(".images");
      const images = imagesContainer.querySelectorAll(".item-photo");
      const indicatorsContainer = slider.querySelector(".indicators");
      let currentIndex = 0;
      let interval;
       let isZooming = false;

      function showImage(index) {
          images.forEach((img, i) => {
              img.style.display = i === index ? "block" : "none";
          });
          updateIndicators();
      }

      function nextImage() {
          currentIndex = (currentIndex + 1) % images.length;
          showImage(currentIndex);
      }

      function prevImage() {
          currentIndex = (currentIndex - 1 + images.length) % images.length;
          showImage(currentIndex);
      }

      function startAutoSlide() {
          if (!interval) {
        interval = setInterval(nextImage, 2000);
      }
      }

      function stopAutoSlide() {
          clearInterval(interval);
           interval = null;
      }

      function updateIndicators() {
          const indicators = indicatorsContainer.querySelectorAll(".indicator");
          indicators.forEach((dot, i) => {
              dot.classList.toggle("active", i === currentIndex);
          });
      }

      function goToImage(index) {
          currentIndex = index;
          showImage(currentIndex);
      }

      // –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
      images.forEach((_, i) => {
          const dot = document.createElement("span");
          dot.classList.add("indicator");
          dot.addEventListener("click", () => goToImage(i));
          indicatorsContainer.appendChild(dot);
      });

      // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏
      const prevButton = slider.querySelector('.prev');
      const nextButton = slider.querySelector('.next');
      
      // –ó–∞–º–µ–Ω–∏–º —Ç–µ–∫—Å—Ç —Å—Ç—Ä–µ–ª–æ–∫ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
      prevButton.innerHTML = '<img src="images/icons/prev-arrow-active.svg" alt="Previous" class="slider-arrow">';
      nextButton.innerHTML = '<img src="images/icons/next-arrow-active.svg" alt="Next" class="slider-arrow">';

      prevButton.addEventListener("click", prevImage);
      nextButton.addEventListener("click", nextImage);

      imagesContainer.addEventListener("mouseenter", startAutoSlide);
      imagesContainer.addEventListener("mouseleave", stopAutoSlide);



 imagesContainer.addEventListener("touchstart", (e) => {
      if (e.touches.length > 1) {
        stopAutoSlide();
        isZooming = true;
      } else {
        stopAutoSlide(); // –æ–±—ã—á–Ω—ã–π —Ç–∞–ø —Ç–æ–∂–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç
      }
    });

    imagesContainer.addEventListener("touchend", (e) => {
      if (e.touches.length === 0 && isZooming) {
        isZooming = false;
        startAutoSlide(); // üîß –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∑—É–º–∞
      }
    });

    imagesContainer.addEventListener("touchcancel", (e) => {
      if (isZooming) {
        isZooming = false;
        startAutoSlide(); // üîß –í–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã –∑—É–º–∞
      }
    });

    // üîß –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –∏ —Å—Ä–∞–∑—É –∑–∞–ø—É—Å–∫–∞–µ–º —Å–ª–∞–π–¥–µ—Ä
    showImage(currentIndex);
    startAutoSlide(); // üîß –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  });
});


// modal

const modal = document.getElementById("modal");
const closeBtn = document.querySelector(".close");
const modalHeading = document.getElementById("modal-heading");
const modalText = document.getElementById("modal-text");
const modalPrice = document.getElementById("modal-price");
const modalColor = document.getElementById("modal-color");
const modalDescription = document.getElementById("modal-description");

const modalSlider = document.querySelector('.modal-slider');
const slides = document.querySelectorAll('.modal-slide');
const prevButton = document.querySelector('.modal-prev');
const nextButton = document.querySelector('.modal-next');
const indicators = document.querySelectorAll('.modal-indicator');
let currentSlide = 0;

function showSlide(index) {
  if (index >= slides.length) currentSlide = 0;
  if (index < 0) currentSlide = slides.length - 1;

  slides.forEach((slide, i) => {
    slide.classList.remove('active');
    if (i === currentSlide) {
      slide.classList.add('active');
    }
  });

  indicators.forEach((indicator, i) => {
    indicator.classList.remove('active');
    if (i === currentSlide) {
      indicator.classList.add('active');
    }
  });
}

prevButton.addEventListener('click', () => {
  currentSlide--;
  showSlide(currentSlide);
});

nextButton.addEventListener('click', () => {
  currentSlide++;
  showSlide(currentSlide);
});

indicators.forEach((indicator, i) => {
  indicator.addEventListener('click', () => {
    currentSlide = i;
    showSlide(currentSlide);
  });
});

function openModal(itemId) {
  const product = [...items1, ...items2].find(item => item.id === itemId);
  if (product) {
    modalHeading.textContent = product.heading;
    modalText.textContent = product.text;
    modalColor.textContent = product.color;
    modalPrice.textContent = product.price;
    modalDescription.textContent = product.description || '–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è';
    document.getElementById('modal-photo1').src = product.photo1;
    document.getElementById('modal-photo2').src = product.photo2;
    document.getElementById('modal-photo3').src = product.photo3;
    modal.style.display = "block";
    showSlide(currentSlide);  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–∞–π–¥–µ—Ä–∞
  }
}

closeBtn.onclick = () => modal.style.display = "none";
window.onclick = (e) => { if (e.target === modal) modal.style.display = "none"; };

// –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç
document.addEventListener("click", (e) => {
  if (e.target.matches(".product-button")) {
    openModal(e.target.dataset.id);
  }
});

let autoSlideInterval;

const modalSliderWrapper = document.querySelector('.modal-slider-wrapper');

function startSlide() {
  autoSlideInterval = setInterval(() => {
    currentSlide++;
    showSlide(currentSlide);
  }, 2000); 
}

function stopSlide() {
  clearInterval(autoSlideInterval);
}

modalSliderWrapper.addEventListener('mouseover', stopSlide);
modalSliderWrapper.addEventListener('mouseout', startSlide);

modalSliderWrapper.addEventListener('touchstart', stopSlide);
modalSliderWrapper.addEventListener('touchend', startSlide);

// modalSliderWrapper.addEventListener('touchstart', (e) => {
//   if (e.touches.length > 1) {
//     stopSlide(); // –µ—Å–ª–∏ –¥–≤–∞ –∏ –±–æ–ª–µ–µ –ø–∞–ª—å—Ü–∞ ‚Äî —ç—Ç–æ –∑—É–º, –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ—Å–ª–∞–π–¥–µ—Ä
//   }
// });
